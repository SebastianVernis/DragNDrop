{"version":3,"file":"main-CNbwjhgh.js","sources":["../../src/components/fileLoader.js","../../src/components/htmlParser.js","../../src/storage/projectManager.js","../../src/utils/componentExtractor.js"],"sourcesContent":["/**\n * FileLoader - Maneja la carga de archivos HTML, CSS, JS e imágenes\n */\nclass FileLoader {\n    constructor() {\n        this.supportedTypes = {\n            html: ['text/html', '.html', '.htm'],\n            css: ['text/css', '.css'],\n            js: ['text/javascript', 'application/javascript', '.js'],\n            images: ['image/png', 'image/jpeg', 'image/gif', 'image/webp', 'image/svg+xml', '.png', '.jpg', '.jpeg', '.gif', '.webp', '.svg']\n        };\n        this.setupDropZone();\n    }\n\n    /**\n     * Configura la zona de drop para archivos\n     */\n    setupDropZone() {\n        const canvas = document.getElementById('canvas');\n        \n        // Prevenir comportamiento por defecto del navegador\n        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {\n            canvas.addEventListener(eventName, this.preventDefaults, false);\n            document.body.addEventListener(eventName, this.preventDefaults, false);\n        });\n\n        // Resaltar zona de drop\n        ['dragenter', 'dragover'].forEach(eventName => {\n            canvas.addEventListener(eventName, this.highlight.bind(this), false);\n        });\n\n        ['dragleave', 'drop'].forEach(eventName => {\n            canvas.addEventListener(eventName, this.unhighlight.bind(this), false);\n        });\n\n        // Manejar archivos soltados\n        canvas.addEventListener('drop', this.handleDrop.bind(this), false);\n    }\n\n    preventDefaults(e) {\n        e.preventDefault();\n        e.stopPropagation();\n    }\n\n    highlight(e) {\n        const canvas = document.getElementById('canvas');\n        canvas.classList.add('file-drop-zone');\n    }\n\n    unhighlight(e) {\n        const canvas = document.getElementById('canvas');\n        canvas.classList.remove('file-drop-zone');\n    }\n\n    /**\n     * Maneja archivos soltados en el canvas\n     */\n    async handleDrop(e) {\n        const dt = e.dataTransfer;\n        const files = dt.files;\n\n        if (files.length > 0) {\n            await this.processFiles(files);\n        }\n    }\n\n    /**\n     * Procesa múltiples archivos\n     */\n    async processFiles(files) {\n        const fileArray = Array.from(files);\n        \n        for (const file of fileArray) {\n            await this.processFile(file);\n        }\n    }\n\n    /**\n     * Procesa un archivo individual\n     */\n    async processFile(file) {\n        const fileType = this.getFileType(file);\n        \n        try {\n            switch (fileType) {\n                case 'html':\n                    await this.loadHTMLFile(file);\n                    break;\n                case 'css':\n                    await this.loadCSSFile(file);\n                    break;\n                case 'js':\n                    await this.loadJSFile(file);\n                    break;\n                case 'images':\n                    await this.loadImageFile(file);\n                    break;\n                default:\n                    this.showError(`Tipo de archivo no soportado: ${file.name}`);\n            }\n        } catch (error) {\n            this.showError(`Error al cargar ${file.name}: ${error.message}`);\n        }\n    }\n\n    /**\n     * Determina el tipo de archivo\n     */\n    getFileType(file) {\n        const fileName = file.name.toLowerCase();\n        const fileType = file.type.toLowerCase();\n\n        for (const [type, patterns] of Object.entries(this.supportedTypes)) {\n            if (patterns.some(pattern => \n                pattern.startsWith('.') ? fileName.endsWith(pattern) : fileType === pattern\n            )) {\n                return type;\n            }\n        }\n        return null;\n    }\n\n    /**\n     * Carga archivo HTML\n     */\n    async loadHTMLFile(file) {\n        const content = await this.readFileAsText(file);\n        \n        // Mostrar preview antes de cargar\n        const shouldLoad = await this.showHTMLPreview(content, file.name);\n        \n        if (shouldLoad) {\n            const htmlParser = new HTMLParser();\n            await htmlParser.parseAndLoad(content);\n            \n            // Extraer componentes automáticamente\n            if (window.componentExtractor) {\n                const extractedComponents = window.componentExtractor.extractComponents(content);\n                if (extractedComponents.length > 0) {\n                    const saved = window.componentExtractor.saveExtractedComponents();\n                    this.showSuccess(`Archivo HTML \"${file.name}\" cargado correctamente. ${saved} componentes extraídos.`);\n                } else {\n                    this.showSuccess(`Archivo HTML \"${file.name}\" cargado correctamente`);\n                }\n            } else {\n                this.showSuccess(`Archivo HTML \"${file.name}\" cargado correctamente`);\n            }\n        }\n    }\n\n    /**\n     * Carga archivo CSS\n     */\n    async loadCSSFile(file) {\n        const content = await this.readFileAsText(file);\n        \n        // Aplicar estilos CSS al documento\n        const styleElement = document.createElement('style');\n        styleElement.textContent = content;\n        styleElement.setAttribute('data-source', file.name);\n        document.head.appendChild(styleElement);\n        \n        this.showSuccess(`Estilos CSS de \"${file.name}\" aplicados`);\n    }\n\n    /**\n     * Carga archivo JavaScript\n     */\n    async loadJSFile(file) {\n        const content = await this.readFileAsText(file);\n        \n        // Mostrar advertencia antes de ejecutar JavaScript\n        const shouldExecute = confirm(\n            `¿Deseas ejecutar el código JavaScript de \"${file.name}\"?\\n\\n` +\n            'ADVERTENCIA: Solo ejecuta código de fuentes confiables.'\n        );\n        \n        if (shouldExecute) {\n            try {\n                // Crear script element\n                const scriptElement = document.createElement('script');\n                scriptElement.textContent = content;\n                scriptElement.setAttribute('data-source', file.name);\n                document.head.appendChild(scriptElement);\n                \n                this.showSuccess(`JavaScript de \"${file.name}\" ejecutado`);\n            } catch (error) {\n                this.showError(`Error al ejecutar JavaScript: ${error.message}`);\n            }\n        }\n    }\n\n    /**\n     * Carga archivo de imagen\n     */\n    async loadImageFile(file) {\n        const imageUrl = await this.readFileAsDataURL(file);\n        \n        // Crear elemento de imagen en el canvas\n        const imgElement = document.createElement('img');\n        imgElement.src = imageUrl;\n        imgElement.alt = file.name;\n        imgElement.style.maxWidth = '100%';\n        imgElement.style.height = 'auto';\n        \n        // Aplicar clases y eventos del editor\n        imgElement.id = 'element-' + (window.elementIdCounter++);\n        imgElement.classList.add('canvas-element');\n        imgElement.setAttribute('data-component-type', 'img');\n\n        // Agregar botón de eliminar\n        const deleteBtn = document.createElement('div');\n        deleteBtn.className = 'delete-btn';\n        deleteBtn.textContent = '×';\n        deleteBtn.onclick = function(e) {\n            e.stopPropagation();\n            window.deleteElement(imgElement);\n        };\n        imgElement.appendChild(deleteBtn);\n\n        // Eventos\n        imgElement.addEventListener('click', function(e) {\n            e.stopPropagation();\n            window.selectElement(imgElement);\n        });\n\n        imgElement.addEventListener('dblclick', function(e) {\n            e.stopPropagation();\n            window.makeElementEditable(imgElement);\n        });\n\n        // Agregar al canvas\n        document.getElementById('canvas').appendChild(imgElement);\n        \n        this.showSuccess(`Imagen \"${file.name}\" agregada al canvas`);\n    }\n\n    /**\n     * Muestra preview del HTML antes de cargar\n     */\n    async showHTMLPreview(content, fileName) {\n        return new Promise((resolve) => {\n            const modal = this.createPreviewModal(content, fileName);\n            document.body.appendChild(modal);\n            \n            const loadBtn = modal.querySelector('.load-btn');\n            const cancelBtn = modal.querySelector('.cancel-btn');\n            \n            loadBtn.onclick = () => {\n                modal.remove();\n                resolve(true);\n            };\n            \n            cancelBtn.onclick = () => {\n                modal.remove();\n                resolve(false);\n            };\n        });\n    }\n\n    /**\n     * Crea modal de preview\n     */\n    createPreviewModal(content, fileName) {\n        const modal = document.createElement('div');\n        modal.className = 'file-preview-modal';\n        modal.innerHTML = `\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                    <h3>Vista previa: ${fileName}</h3>\n                    <button class=\"modal-close cancel-btn\">&times;</button>\n                </div>\n                <div class=\"modal-body\">\n                    <div class=\"preview-content\">\n                        <iframe srcdoc=\"${this.escapeHtml(content)}\" style=\"width: 100%; height: 400px; border: 1px solid #e2e8f0;\"></iframe>\n                    </div>\n                    <div class=\"preview-actions\">\n                        <button class=\"load-btn\">Cargar archivo</button>\n                        <button class=\"cancel-btn\">Cancelar</button>\n                    </div>\n                </div>\n            </div>\n        `;\n        return modal;\n    }\n\n    /**\n     * Lee archivo como texto\n     */\n    readFileAsText(file) {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            reader.onload = e => resolve(e.target.result);\n            reader.onerror = e => reject(new Error('Error al leer archivo'));\n            reader.readAsText(file);\n        });\n    }\n\n    /**\n     * Lee archivo como Data URL\n     */\n    readFileAsDataURL(file) {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            reader.onload = e => resolve(e.target.result);\n            reader.onerror = e => reject(new Error('Error al leer archivo'));\n            reader.readAsDataURL(file);\n        });\n    }\n\n    /**\n     * Escapa HTML para preview seguro\n     */\n    escapeHtml(html) {\n        return html.replace(/\"/g, '&quot;');\n    }\n\n    /**\n     * Muestra mensaje de éxito\n     */\n    showSuccess(message) {\n        if (window.showToast) {\n            window.showToast(message);\n        } else {\n            console.log('SUCCESS:', message);\n        }\n    }\n\n    /**\n     * Muestra mensaje de error\n     */\n    showError(message) {\n        if (window.showToast) {\n            window.showToast(message);\n        } else {\n            console.error('ERROR:', message);\n        }\n        alert(message);\n    }\n}\n\n// Exportar para uso en otros módulos\nif (typeof module !== 'undefined' && module.exports) {\n    module.exports = FileLoader;\n}\n\n// Exportar globalmente para compatibilidad\nwindow.FileLoader = FileLoader;","/**\n * HTMLParser - Convierte HTML existente en componentes editables del editor\n */\nclass HTMLParser {\n    constructor() {\n        this.componentTypes = {\n            'nav': 'navbar',\n            'header': 'header',\n            'footer': 'footer',\n            'section': 'seccion',\n            'article': 'article',\n            'div': 'contenedor',\n            'h1': 'h1',\n            'h2': 'h2',\n            'h3': 'h3',\n            'h4': 'h4',\n            'h5': 'h5',\n            'h6': 'h6',\n            'p': 'p',\n            'span': 'span',\n            'img': 'img',\n            'video': 'video',\n            'iframe': 'iframe',\n            'button': 'button',\n            'input': 'input',\n            'textarea': 'textarea',\n            'select': 'select',\n            'ul': 'ul',\n            'ol': 'ol',\n            'li': 'li',\n            'a': 'link',\n            'form': 'form'\n        };\n        \n        this.skipElements = ['script', 'style', 'meta', 'link', 'title', 'head'];\n        this.elementIdCounter = window.elementIdCounter || 0;\n    }\n\n    /**\n     * Parsea HTML y lo carga en el canvas\n     */\n    async parseAndLoad(htmlContent) {\n        try {\n            // Crear parser DOM\n            const parser = new DOMParser();\n            const doc = parser.parseFromString(htmlContent, 'text/html');\n            \n            // Extraer estilos CSS\n            await this.extractStyles(doc);\n            \n            // Extraer y preservar scripts\n            await this.extractScripts(doc);\n            \n            // Procesar el body\n            const body = doc.body;\n            if (body) {\n                const canvas = document.getElementById('canvas');\n                \n                // Limpiar canvas actual si el usuario confirma\n                if (canvas.children.length > 0) {\n                    const shouldReplace = confirm('¿Deseas reemplazar el contenido actual del canvas?');\n                    if (!shouldReplace) {\n                        return;\n                    }\n                    canvas.innerHTML = '';\n                }\n                \n                // Procesar elementos del body\n                await this.processElements(body.children, canvas);\n                \n                // Actualizar contador global\n                window.elementIdCounter = this.elementIdCounter;\n                \n                this.showSuccess('HTML convertido exitosamente a componentes editables');\n            }\n        } catch (error) {\n            this.showError(`Error al parsear HTML: ${error.message}`);\n        }\n    }\n\n    /**\n     * Extrae y aplica estilos CSS del documento\n     */\n    async extractStyles(doc) {\n        // Extraer estilos inline del head\n        const styleElements = doc.querySelectorAll('style');\n        styleElements.forEach((styleEl, index) => {\n            const newStyle = document.createElement('style');\n            newStyle.textContent = styleEl.textContent;\n            newStyle.setAttribute('data-source', `imported-style-${index}`);\n            document.head.appendChild(newStyle);\n        });\n\n        // Extraer links a CSS externos\n        const linkElements = doc.querySelectorAll('link[rel=\"stylesheet\"]');\n        linkElements.forEach((linkEl, index) => {\n            const newLink = document.createElement('link');\n            newLink.rel = 'stylesheet';\n            newLink.href = linkEl.href;\n            newLink.setAttribute('data-source', `imported-link-${index}`);\n            document.head.appendChild(newLink);\n        });\n    }\n\n    /**\n     * Extrae y preserva scripts JavaScript\n     */\n    async extractScripts(doc) {\n        const scriptElements = doc.querySelectorAll('script');\n        const scripts = [];\n        \n        scriptElements.forEach(scriptEl => {\n            if (scriptEl.src) {\n                // Script externo\n                scripts.push({\n                    type: 'external',\n                    src: scriptEl.src,\n                    content: null\n                });\n            } else if (scriptEl.textContent.trim()) {\n                // Script inline\n                scripts.push({\n                    type: 'inline',\n                    src: null,\n                    content: scriptEl.textContent\n                });\n            }\n        });\n\n        // Mostrar scripts encontrados al usuario\n        if (scripts.length > 0) {\n            const shouldInclude = confirm(\n                `Se encontraron ${scripts.length} script(s) JavaScript.\\n` +\n                '¿Deseas incluirlos? (Solo acepta si confías en el código)'\n            );\n            \n            if (shouldInclude) {\n                scripts.forEach((script, index) => {\n                    const newScript = document.createElement('script');\n                    if (script.type === 'external') {\n                        newScript.src = script.src;\n                    } else {\n                        newScript.textContent = script.content;\n                    }\n                    newScript.setAttribute('data-source', `imported-script-${index}`);\n                    document.head.appendChild(newScript);\n                });\n            }\n        }\n    }\n\n    /**\n     * Procesa elementos HTML y los convierte en componentes editables\n     */\n    async processElements(elements, container) {\n        for (const element of elements) {\n            if (this.shouldSkipElement(element)) {\n                continue;\n            }\n\n            const convertedElement = await this.convertElement(element);\n            if (convertedElement) {\n                container.appendChild(convertedElement);\n            }\n        }\n    }\n\n    /**\n     * Verifica si un elemento debe ser omitido\n     */\n    shouldSkipElement(element) {\n        const tagName = element.tagName.toLowerCase();\n        return this.skipElements.includes(tagName) || \n               element.nodeType !== Node.ELEMENT_NODE;\n    }\n\n    /**\n     * Convierte un elemento HTML en componente editable\n     */\n    async convertElement(originalElement) {\n        const tagName = originalElement.tagName.toLowerCase();\n        const componentType = this.componentTypes[tagName] || 'contenedor';\n        \n        // Crear nuevo elemento\n        const newElement = document.createElement(tagName);\n        \n        // Copiar atributos (excepto id que será regenerado)\n        Array.from(originalElement.attributes).forEach(attr => {\n            if (attr.name !== 'id') {\n                newElement.setAttribute(attr.name, attr.value);\n            }\n        });\n\n        // Asignar nuevo ID único\n        newElement.id = 'element-' + (this.elementIdCounter++);\n        newElement.classList.add('canvas-element');\n        newElement.setAttribute('data-component-type', componentType);\n\n        // Copiar estilos inline\n        if (originalElement.style.cssText) {\n            newElement.style.cssText = originalElement.style.cssText;\n        }\n\n        // Procesar contenido\n        await this.processElementContent(originalElement, newElement);\n\n        // Agregar funcionalidad del editor\n        this.addEditorFunctionality(newElement);\n\n        return newElement;\n    }\n\n    /**\n     * Procesa el contenido de un elemento\n     */\n    async processElementContent(originalElement, newElement) {\n        // Si el elemento tiene solo texto, copiarlo directamente\n        if (originalElement.children.length === 0) {\n            newElement.textContent = originalElement.textContent;\n        } else {\n            // Procesar elementos hijos recursivamente\n            await this.processElements(originalElement.children, newElement);\n            \n            // Preservar texto que no esté en elementos hijos\n            const textNodes = Array.from(originalElement.childNodes)\n                .filter(node => node.nodeType === Node.TEXT_NODE && node.textContent.trim());\n            \n            if (textNodes.length > 0) {\n                textNodes.forEach(textNode => {\n                    newElement.appendChild(document.createTextNode(textNode.textContent));\n                });\n            }\n        }\n    }\n\n    /**\n     * Agrega funcionalidad del editor al elemento\n     */\n    addEditorFunctionality(element) {\n        // Agregar botón de eliminar\n        const deleteBtn = document.createElement('div');\n        deleteBtn.className = 'delete-btn';\n        deleteBtn.textContent = '×';\n        deleteBtn.onclick = (e) => {\n            e.stopPropagation();\n            if (window.deleteElement) {\n                window.deleteElement(element);\n            } else {\n                element.remove();\n            }\n        };\n        element.appendChild(deleteBtn);\n\n        // Eventos de selección\n        element.addEventListener('click', (e) => {\n            e.stopPropagation();\n            if (window.selectElement) {\n                window.selectElement(element);\n            }\n        });\n\n        // Eventos de edición\n        element.addEventListener('dblclick', (e) => {\n            e.stopPropagation();\n            if (window.makeElementEditable) {\n                window.makeElementEditable(element);\n            }\n        });\n    }\n\n    /**\n     * Detecta y convierte patrones comunes en componentes especializados\n     */\n    detectSpecialComponents(element) {\n        const classes = element.className.toLowerCase();\n        const tagName = element.tagName.toLowerCase();\n        \n        // Detectar navbar\n        if (tagName === 'nav' || classes.includes('nav') || classes.includes('navbar')) {\n            return this.convertToNavbar(element);\n        }\n        \n        // Detectar hero section\n        if (classes.includes('hero') || classes.includes('banner') || classes.includes('jumbotron')) {\n            return this.convertToHero(element);\n        }\n        \n        // Detectar card\n        if (classes.includes('card') || classes.includes('box') || classes.includes('panel')) {\n            return this.convertToCard(element);\n        }\n        \n        // Detectar footer\n        if (tagName === 'footer' || classes.includes('footer')) {\n            return this.convertToFooter(element);\n        }\n        \n        return null;\n    }\n\n    /**\n     * Convierte elemento en navbar especializado\n     */\n    convertToNavbar(element) {\n        element.setAttribute('data-component-type', 'navbar');\n        element.classList.add('component-navbar');\n        return element;\n    }\n\n    /**\n     * Convierte elemento en hero section\n     */\n    convertToHero(element) {\n        element.setAttribute('data-component-type', 'hero');\n        element.classList.add('component-hero');\n        return element;\n    }\n\n    /**\n     * Convierte elemento en card\n     */\n    convertToCard(element) {\n        element.setAttribute('data-component-type', 'card');\n        element.classList.add('component-card');\n        return element;\n    }\n\n    /**\n     * Convierte elemento en footer\n     */\n    convertToFooter(element) {\n        element.setAttribute('data-component-type', 'footer');\n        element.classList.add('component-footer');\n        return element;\n    }\n\n    /**\n     * Muestra mensaje de éxito\n     */\n    showSuccess(message) {\n        if (window.showToast) {\n            window.showToast(message);\n        } else {\n            console.log('SUCCESS:', message);\n        }\n    }\n\n    /**\n     * Muestra mensaje de error\n     */\n    showError(message) {\n        if (window.showToast) {\n            window.showToast(message);\n        } else {\n            console.error('ERROR:', message);\n        }\n        alert(message);\n    }\n}\n\n// Exportar para uso en otros módulos\nif (typeof module !== 'undefined' && module.exports) {\n    module.exports = HTMLParser;\n}\n\n// Exportar globalmente para compatibilidad\nwindow.HTMLParser = HTMLParser;","/**\n * ProjectManager - Gestiona proyectos, persistencia y historial\n */\nclass ProjectManager {\n    constructor() {\n        this.storageKey = 'dragndrop_projects';\n        this.currentProjectKey = 'dragndrop_current_project';\n        this.autoSaveInterval = 30000; // 30 segundos\n        this.autoSaveTimer = null;\n        this.currentProject = null;\n        \n        this.init();\n    }\n\n    /**\n     * Inicializa el gestor de proyectos\n     */\n    init() {\n        this.loadCurrentProject();\n        this.startAutoSave();\n        this.setupEventListeners();\n    }\n\n    /**\n     * Crea un nuevo proyecto\n     */\n    createNewProject(name = null) {\n        const projectName = name || `Proyecto ${new Date().toLocaleDateString()}`;\n        \n        this.currentProject = {\n            id: this.generateId(),\n            name: projectName,\n            created: new Date().toISOString(),\n            modified: new Date().toISOString(),\n            html: '',\n            version: 1,\n            thumbnail: null\n        };\n        \n        this.saveCurrentProject();\n        this.showSuccess(`Nuevo proyecto \"${projectName}\" creado`);\n        \n        return this.currentProject;\n    }\n\n    /**\n     * Guarda el proyecto actual\n     */\n    saveCurrentProject() {\n        if (!this.currentProject) {\n            this.createNewProject();\n        }\n\n        // Capturar contenido actual del canvas\n        const canvas = document.getElementById('canvas');\n        if (canvas) {\n            this.currentProject.html = canvas.innerHTML;\n            this.currentProject.modified = new Date().toISOString();\n            \n            // Generar thumbnail\n            this.generateThumbnail().then(thumbnail => {\n                this.currentProject.thumbnail = thumbnail;\n                this.saveToStorage();\n            });\n        }\n        \n        // Guardar en localStorage como proyecto actual\n        localStorage.setItem(this.currentProjectKey, JSON.stringify(this.currentProject));\n    }\n\n    /**\n     * Guarda proyecto en el historial\n     */\n    saveToStorage() {\n        const projects = this.getStoredProjects();\n        \n        // Buscar si ya existe el proyecto\n        const existingIndex = projects.findIndex(p => p.id === this.currentProject.id);\n        \n        if (existingIndex >= 0) {\n            // Actualizar proyecto existente\n            projects[existingIndex] = { ...this.currentProject };\n        } else {\n            // Agregar nuevo proyecto\n            projects.unshift(this.currentProject);\n        }\n        \n        // Limitar a 20 proyectos máximo\n        if (projects.length > 20) {\n            projects.splice(20);\n        }\n        \n        localStorage.setItem(this.storageKey, JSON.stringify(projects));\n    }\n\n    /**\n     * Carga el proyecto actual desde localStorage\n     */\n    loadCurrentProject() {\n        try {\n            const stored = localStorage.getItem(this.currentProjectKey);\n            if (stored) {\n                this.currentProject = JSON.parse(stored);\n                this.loadProjectToCanvas(this.currentProject);\n                this.showSuccess(`Proyecto \"${this.currentProject.name}\" restaurado`);\n            }\n        } catch (error) {\n            console.error('Error al cargar proyecto actual:', error);\n        }\n    }\n\n    /**\n     * Carga un proyecto específico\n     */\n    loadProject(projectId) {\n        const projects = this.getStoredProjects();\n        const project = projects.find(p => p.id === projectId);\n        \n        if (project) {\n            this.currentProject = { ...project };\n            this.loadProjectToCanvas(project);\n            this.saveCurrentProject(); // Actualizar como proyecto actual\n            this.showSuccess(`Proyecto \"${project.name}\" cargado`);\n            return true;\n        }\n        \n        this.showError('Proyecto no encontrado');\n        return false;\n    }\n\n    /**\n     * Carga proyecto al canvas\n     */\n    loadProjectToCanvas(project) {\n        const canvas = document.getElementById('canvas');\n        if (canvas && project.html) {\n            canvas.innerHTML = project.html;\n            \n            // Re-aplicar eventos a los elementos cargados\n            this.reapplyEditorEvents();\n        }\n    }\n\n    /**\n     * Re-aplica eventos del editor a elementos cargados\n     */\n    reapplyEditorEvents() {\n        const elements = document.querySelectorAll('.canvas-element');\n        elements.forEach(element => {\n            // Limpiar eventos existentes\n            element.replaceWith(element.cloneNode(true));\n            const newElement = document.querySelector(`#${element.id}`);\n            \n            // Aplicar eventos del editor\n            newElement.addEventListener('click', function(e) {\n                e.stopPropagation();\n                if (window.selectElement) {\n                    window.selectElement(newElement);\n                }\n            });\n\n            newElement.addEventListener('dblclick', function(e) {\n                e.stopPropagation();\n                if (window.makeElementEditable) {\n                    window.makeElementEditable(newElement);\n                }\n            });\n\n            // Re-aplicar botón de eliminar\n            const deleteBtn = newElement.querySelector('.delete-btn');\n            if (deleteBtn) {\n                deleteBtn.onclick = function(e) {\n                    e.stopPropagation();\n                    if (window.deleteElement) {\n                        window.deleteElement(newElement);\n                    }\n                };\n            }\n        });\n    }\n\n    /**\n     * Obtiene todos los proyectos guardados\n     */\n    getStoredProjects() {\n        try {\n            const stored = localStorage.getItem(this.storageKey);\n            return stored ? JSON.parse(stored) : [];\n        } catch (error) {\n            console.error('Error al obtener proyectos:', error);\n            return [];\n        }\n    }\n\n    /**\n     * Elimina un proyecto\n     */\n    deleteProject(projectId) {\n        const projects = this.getStoredProjects();\n        const filteredProjects = projects.filter(p => p.id !== projectId);\n        \n        localStorage.setItem(this.storageKey, JSON.stringify(filteredProjects));\n        \n        // Si es el proyecto actual, crear uno nuevo\n        if (this.currentProject && this.currentProject.id === projectId) {\n            this.createNewProject();\n        }\n        \n        this.showSuccess('Proyecto eliminado');\n    }\n\n    /**\n     * Duplica un proyecto\n     */\n    duplicateProject(projectId) {\n        const projects = this.getStoredProjects();\n        const project = projects.find(p => p.id === projectId);\n        \n        if (project) {\n            const duplicated = {\n                ...project,\n                id: this.generateId(),\n                name: `${project.name} (Copia)`,\n                created: new Date().toISOString(),\n                modified: new Date().toISOString()\n            };\n            \n            projects.unshift(duplicated);\n            localStorage.setItem(this.storageKey, JSON.stringify(projects));\n            \n            this.showSuccess(`Proyecto duplicado: \"${duplicated.name}\"`);\n            return duplicated;\n        }\n        \n        return null;\n    }\n\n    /**\n     * Renombra un proyecto\n     */\n    renameProject(projectId, newName) {\n        const projects = this.getStoredProjects();\n        const project = projects.find(p => p.id === projectId);\n        \n        if (project) {\n            project.name = newName;\n            project.modified = new Date().toISOString();\n            \n            localStorage.setItem(this.storageKey, JSON.stringify(projects));\n            \n            // Actualizar proyecto actual si es el mismo\n            if (this.currentProject && this.currentProject.id === projectId) {\n                this.currentProject.name = newName;\n                this.saveCurrentProject();\n            }\n            \n            this.showSuccess(`Proyecto renombrado a \"${newName}\"`);\n            return true;\n        }\n        \n        return false;\n    }\n\n    /**\n     * Exporta proyecto como JSON\n     */\n    exportProject(projectId = null) {\n        const project = projectId ? \n            this.getStoredProjects().find(p => p.id === projectId) : \n            this.currentProject;\n            \n        if (project) {\n            const blob = new Blob([JSON.stringify(project, null, 2)], { \n                type: 'application/json' \n            });\n            const url = URL.createObjectURL(blob);\n            const a = document.createElement('a');\n            a.href = url;\n            a.download = `${project.name}.json`;\n            a.click();\n            URL.revokeObjectURL(url);\n            \n            this.showSuccess(`Proyecto \"${project.name}\" exportado`);\n        }\n    }\n\n    /**\n     * Importa proyecto desde JSON\n     */\n    async importProject(file) {\n        try {\n            const content = await this.readFileAsText(file);\n            const project = JSON.parse(content);\n            \n            // Validar estructura del proyecto\n            if (!project.id || !project.name || !project.html) {\n                throw new Error('Formato de proyecto inválido');\n            }\n            \n            // Asignar nuevo ID para evitar conflictos\n            project.id = this.generateId();\n            project.name = `${project.name} (Importado)`;\n            project.modified = new Date().toISOString();\n            \n            // Guardar proyecto\n            const projects = this.getStoredProjects();\n            projects.unshift(project);\n            localStorage.setItem(this.storageKey, JSON.stringify(projects));\n            \n            this.showSuccess(`Proyecto \"${project.name}\" importado`);\n            return project;\n            \n        } catch (error) {\n            this.showError(`Error al importar proyecto: ${error.message}`);\n            return null;\n        }\n    }\n\n    /**\n     * Inicia auto-guardado\n     */\n    startAutoSave() {\n        this.stopAutoSave(); // Limpiar timer existente\n        \n        this.autoSaveTimer = setInterval(() => {\n            if (this.currentProject) {\n                this.saveCurrentProject();\n                console.log('Auto-guardado realizado');\n            }\n        }, this.autoSaveInterval);\n    }\n\n    /**\n     * Detiene auto-guardado\n     */\n    stopAutoSave() {\n        if (this.autoSaveTimer) {\n            clearInterval(this.autoSaveTimer);\n            this.autoSaveTimer = null;\n        }\n    }\n\n    /**\n     * Configura event listeners\n     */\n    setupEventListeners() {\n        // Guardar antes de cerrar la ventana\n        window.addEventListener('beforeunload', () => {\n            this.saveCurrentProject();\n        });\n        \n        // Detectar cambios en el canvas para auto-guardado\n        const canvas = document.getElementById('canvas');\n        if (canvas) {\n            const observer = new MutationObserver(() => {\n                if (this.currentProject) {\n                    // Marcar como modificado\n                    this.currentProject.modified = new Date().toISOString();\n                }\n            });\n            \n            observer.observe(canvas, {\n                childList: true,\n                subtree: true,\n                attributes: true,\n                characterData: true\n            });\n        }\n    }\n\n    /**\n     * Genera thumbnail del proyecto\n     */\n    async generateThumbnail() {\n        try {\n            const canvas = document.getElementById('canvas');\n            if (!canvas) return null;\n            \n            // Usar html2canvas si está disponible, sino retornar null\n            if (typeof html2canvas !== 'undefined') {\n                const canvasElement = await html2canvas(canvas, {\n                    width: 300,\n                    height: 200,\n                    scale: 0.3\n                });\n                return canvasElement.toDataURL('image/jpeg', 0.7);\n            }\n            \n            return null;\n        } catch (error) {\n            console.error('Error generando thumbnail:', error);\n            return null;\n        }\n    }\n\n    /**\n     * Genera ID único\n     */\n    generateId() {\n        return 'project_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\n    }\n\n    /**\n     * Lee archivo como texto\n     */\n    readFileAsText(file) {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            reader.onload = e => resolve(e.target.result);\n            reader.onerror = e => reject(new Error('Error al leer archivo'));\n            reader.readAsText(file);\n        });\n    }\n\n    /**\n     * Obtiene información del proyecto actual\n     */\n    getCurrentProjectInfo() {\n        return this.currentProject ? { ...this.currentProject } : null;\n    }\n\n    /**\n     * Obtiene estadísticas de proyectos\n     */\n    getProjectStats() {\n        const projects = this.getStoredProjects();\n        return {\n            total: projects.length,\n            current: this.currentProject ? this.currentProject.name : 'Sin proyecto',\n            lastModified: projects.length > 0 ? projects[0].modified : null\n        };\n    }\n\n    /**\n     * Muestra mensaje de éxito\n     */\n    showSuccess(message) {\n        if (window.showToast) {\n            window.showToast(message);\n        } else {\n            console.log('SUCCESS:', message);\n        }\n    }\n\n    /**\n     * Muestra mensaje de error\n     */\n    showError(message) {\n        if (window.showToast) {\n            window.showToast(message);\n        } else {\n            console.error('ERROR:', message);\n        }\n    }\n}\n\n// Exportar para uso en otros módulos\nif (typeof module !== 'undefined' && module.exports) {\n    module.exports = ProjectManager;\n}\n\n// Exportar globalmente para compatibilidad\nwindow.ProjectManager = ProjectManager;","/**\n * ComponentExtractor - Extrae y crea componentes reutilizables desde HTML importado\n */\nclass ComponentExtractor {\n    constructor() {\n        this.extractedComponents = [];\n        this.componentPatterns = {\n            navbar: {\n                selectors: ['nav', '.navbar', '.nav', '.navigation', '.header-nav'],\n                minElements: 2,\n                requiredElements: ['a', 'ul', 'li']\n            },\n            card: {\n                selectors: ['.card', '.box', '.panel', '.item', '.product'],\n                minElements: 2,\n                requiredElements: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'p', 'img']\n            },\n            hero: {\n                selectors: ['.hero', '.banner', '.jumbotron', '.intro', '.header-section'],\n                minElements: 2,\n                requiredElements: ['h1', 'h2', 'p', 'button', 'a']\n            },\n            footer: {\n                selectors: ['footer', '.footer', '.site-footer'],\n                minElements: 1,\n                requiredElements: ['p', 'a', 'ul']\n            },\n            form: {\n                selectors: ['form', '.form', '.contact-form'],\n                minElements: 2,\n                requiredElements: ['input', 'textarea', 'button', 'select']\n            },\n            gallery: {\n                selectors: ['.gallery', '.grid', '.portfolio', '.images'],\n                minElements: 3,\n                requiredElements: ['img']\n            },\n            testimonial: {\n                selectors: ['.testimonial', '.review', '.quote'],\n                minElements: 2,\n                requiredElements: ['p', 'blockquote']\n            },\n            pricing: {\n                selectors: ['.pricing', '.price', '.plan'],\n                minElements: 2,\n                requiredElements: ['h1', 'h2', 'h3', 'h4', 'span', 'button']\n            }\n        };\n    }\n\n    /**\n     * Extrae componentes de un documento HTML\n     */\n    extractComponents(htmlContent) {\n        const parser = new DOMParser();\n        const doc = parser.parseFromString(htmlContent, 'text/html');\n        \n        this.extractedComponents = [];\n        \n        // Buscar patrones de componentes\n        for (const [componentType, pattern] of Object.entries(this.componentPatterns)) {\n            this.findComponentsByPattern(doc, componentType, pattern);\n        }\n        \n        // Buscar componentes por estructura\n        this.findComponentsByStructure(doc);\n        \n        return this.extractedComponents;\n    }\n\n    /**\n     * Busca componentes basado en patrones predefinidos\n     */\n    findComponentsByPattern(doc, componentType, pattern) {\n        pattern.selectors.forEach(selector => {\n            const elements = doc.querySelectorAll(selector);\n            \n            elements.forEach(element => {\n                if (this.validateComponent(element, pattern)) {\n                    const component = this.createComponent(element, componentType);\n                    if (component) {\n                        this.extractedComponents.push(component);\n                    }\n                }\n            });\n        });\n    }\n\n    /**\n     * Busca componentes basado en estructura HTML\n     */\n    findComponentsByStructure(doc) {\n        // Buscar divs con múltiples elementos hijos que podrían ser componentes\n        const containers = doc.querySelectorAll('div, section, article');\n        \n        containers.forEach(container => {\n            if (this.couldBeComponent(container)) {\n                const componentType = this.guessComponentType(container);\n                const component = this.createComponent(container, componentType);\n                if (component) {\n                    this.extractedComponents.push(component);\n                }\n            }\n        });\n    }\n\n    /**\n     * Valida si un elemento cumple con los requisitos de un patrón\n     */\n    validateComponent(element, pattern) {\n        const childElements = element.querySelectorAll('*');\n        \n        // Verificar cantidad mínima de elementos\n        if (childElements.length < pattern.minElements) {\n            return false;\n        }\n        \n        // Verificar elementos requeridos\n        const hasRequiredElements = pattern.requiredElements.some(selector => \n            element.querySelector(selector) !== null\n        );\n        \n        return hasRequiredElements;\n    }\n\n    /**\n     * Determina si un elemento podría ser un componente\n     */\n    couldBeComponent(element) {\n        const childElements = element.children;\n        const textContent = element.textContent.trim();\n        \n        // Debe tener al menos 2 elementos hijos o contenido significativo\n        if (childElements.length < 2 && textContent.length < 50) {\n            return false;\n        }\n        \n        // No debe ser demasiado grande (probablemente sea un layout)\n        if (childElements.length > 20) {\n            return false;\n        }\n        \n        // Debe tener cierta diversidad de elementos\n        const tagTypes = new Set(Array.from(childElements).map(el => el.tagName));\n        return tagTypes.size >= 2;\n    }\n\n    /**\n     * Intenta adivinar el tipo de componente basado en su contenido\n     */\n    guessComponentType(element) {\n        const classes = element.className.toLowerCase();\n        const textContent = element.textContent.toLowerCase();\n        \n        // Buscar palabras clave en clases\n        if (classes.includes('nav')) return 'navbar';\n        if (classes.includes('card') || classes.includes('box')) return 'card';\n        if (classes.includes('hero') || classes.includes('banner')) return 'hero';\n        if (classes.includes('footer')) return 'footer';\n        if (classes.includes('form')) return 'form';\n        if (classes.includes('gallery') || classes.includes('grid')) return 'gallery';\n        \n        // Buscar por contenido\n        if (element.querySelector('form')) return 'form';\n        if (element.querySelectorAll('img').length >= 3) return 'gallery';\n        if (element.querySelector('blockquote')) return 'testimonial';\n        if (textContent.includes('$') || textContent.includes('precio')) return 'pricing';\n        \n        // Por estructura\n        const hasHeading = element.querySelector('h1, h2, h3, h4, h5, h6');\n        const hasImage = element.querySelector('img');\n        const hasButton = element.querySelector('button, .btn, a[class*=\"btn\"]');\n        \n        if (hasHeading && hasImage && hasButton) return 'card';\n        if (hasHeading && hasButton && element.children.length <= 5) return 'hero';\n        \n        return 'custom';\n    }\n\n    /**\n     * Crea un objeto componente a partir de un elemento\n     */\n    createComponent(element, type) {\n        try {\n            // Limpiar elemento (remover scripts, etc.)\n            const cleanElement = this.cleanElement(element.cloneNode(true));\n            \n            const component = {\n                id: this.generateComponentId(),\n                type: type,\n                name: this.generateComponentName(cleanElement, type),\n                html: cleanElement.outerHTML,\n                css: this.extractElementCSS(element),\n                preview: this.generatePreview(cleanElement),\n                tags: this.generateTags(cleanElement, type),\n                created: new Date().toISOString()\n            };\n            \n            return component;\n        } catch (error) {\n            console.error('Error creando componente:', error);\n            return null;\n        }\n    }\n\n    /**\n     * Limpia un elemento removiendo scripts y elementos no deseados\n     */\n    cleanElement(element) {\n        // Remover scripts\n        const scripts = element.querySelectorAll('script');\n        scripts.forEach(script => script.remove());\n        \n        // Remover comentarios\n        const walker = document.createTreeWalker(\n            element,\n            NodeFilter.SHOW_COMMENT,\n            null,\n            false\n        );\n        \n        const comments = [];\n        let node;\n        while (node = walker.nextNode()) {\n            comments.push(node);\n        }\n        comments.forEach(comment => comment.remove());\n        \n        // Limpiar atributos problemáticos\n        const allElements = element.querySelectorAll('*');\n        allElements.forEach(el => {\n            el.removeAttribute('onclick');\n            el.removeAttribute('onload');\n            el.removeAttribute('onerror');\n        });\n        \n        return element;\n    }\n\n    /**\n     * Extrae CSS relevante para un elemento\n     */\n    extractElementCSS(element) {\n        const css = [];\n        \n        // CSS inline\n        if (element.style.cssText) {\n            css.push(`/* Estilos inline */\\n.${element.className || 'component'} {\\n  ${element.style.cssText}\\n}`);\n        }\n        \n        // CSS de elementos hijos con estilos inline\n        const styledElements = element.querySelectorAll('[style]');\n        styledElements.forEach((el, index) => {\n            if (el.style.cssText) {\n                const selector = el.className ? `.${el.className}` : `element-${index}`;\n                css.push(`${selector} {\\n  ${el.style.cssText}\\n}`);\n            }\n        });\n        \n        return css.join('\\n\\n');\n    }\n\n    /**\n     * Genera preview del componente\n     */\n    generatePreview(element) {\n        // Crear una versión miniatura del HTML\n        const preview = element.cloneNode(true);\n        \n        // Simplificar contenido para preview\n        const textElements = preview.querySelectorAll('p, span, h1, h2, h3, h4, h5, h6');\n        textElements.forEach(el => {\n            if (el.textContent.length > 50) {\n                el.textContent = el.textContent.substring(0, 50) + '...';\n            }\n        });\n        \n        return preview.outerHTML;\n    }\n\n    /**\n     * Genera tags para el componente\n     */\n    generateTags(element, type) {\n        const tags = [type];\n        \n        // Tags basados en elementos contenidos\n        if (element.querySelector('img')) tags.push('imagen');\n        if (element.querySelector('button, .btn')) tags.push('botón');\n        if (element.querySelector('form')) tags.push('formulario');\n        if (element.querySelector('ul, ol')) tags.push('lista');\n        if (element.querySelector('table')) tags.push('tabla');\n        \n        // Tags basados en clases CSS\n        const classes = element.className.toLowerCase();\n        if (classes.includes('responsive')) tags.push('responsive');\n        if (classes.includes('dark')) tags.push('oscuro');\n        if (classes.includes('light')) tags.push('claro');\n        \n        return [...new Set(tags)]; // Remover duplicados\n    }\n\n    /**\n     * Genera nombre para el componente\n     */\n    generateComponentName(element, type) {\n        // Buscar texto representativo\n        const heading = element.querySelector('h1, h2, h3, h4, h5, h6');\n        if (heading && heading.textContent.trim()) {\n            const text = heading.textContent.trim().substring(0, 30);\n            return `${this.capitalizeFirst(type)} - ${text}`;\n        }\n        \n        // Buscar por clase CSS\n        if (element.className) {\n            const className = element.className.split(' ')[0];\n            return `${this.capitalizeFirst(type)} - ${className}`;\n        }\n        \n        // Nombre genérico\n        const timestamp = new Date().toLocaleTimeString();\n        return `${this.capitalizeFirst(type)} ${timestamp}`;\n    }\n\n    /**\n     * Genera ID único para componente\n     */\n    generateComponentId() {\n        return 'comp_' + Date.now() + '_' + Math.random().toString(36).substr(2, 6);\n    }\n\n    /**\n     * Capitaliza primera letra\n     */\n    capitalizeFirst(str) {\n        return str.charAt(0).toUpperCase() + str.slice(1);\n    }\n\n    /**\n     * Guarda componentes extraídos en localStorage\n     */\n    saveExtractedComponents() {\n        const storageKey = 'dragndrop_extracted_components';\n        const existing = this.getStoredComponents();\n        \n        // Agregar nuevos componentes\n        const updated = [...existing, ...this.extractedComponents];\n        \n        // Limitar a 50 componentes máximo\n        if (updated.length > 50) {\n            updated.splice(50);\n        }\n        \n        localStorage.setItem(storageKey, JSON.stringify(updated));\n        \n        return this.extractedComponents.length;\n    }\n\n    /**\n     * Obtiene componentes guardados\n     */\n    getStoredComponents() {\n        try {\n            const storageKey = 'dragndrop_extracted_components';\n            const stored = localStorage.getItem(storageKey);\n            return stored ? JSON.parse(stored) : [];\n        } catch (error) {\n            console.error('Error al obtener componentes:', error);\n            return [];\n        }\n    }\n\n    /**\n     * Elimina componente guardado\n     */\n    deleteStoredComponent(componentId) {\n        const storageKey = 'dragndrop_extracted_components';\n        const components = this.getStoredComponents();\n        const filtered = components.filter(c => c.id !== componentId);\n        \n        localStorage.setItem(storageKey, JSON.stringify(filtered));\n    }\n\n    /**\n     * Busca componentes por tags\n     */\n    searchComponents(query) {\n        const components = this.getStoredComponents();\n        const searchTerm = query.toLowerCase();\n        \n        return components.filter(component => \n            component.name.toLowerCase().includes(searchTerm) ||\n            component.type.toLowerCase().includes(searchTerm) ||\n            component.tags.some(tag => tag.toLowerCase().includes(searchTerm))\n        );\n    }\n}\n\n// Exportar para uso en otros módulos\nif (typeof module !== 'undefined' && module.exports) {\n    module.exports = ComponentExtractor;\n}\n\n// Exportar globalmente para compatibilidad\nwindow.ComponentExtractor = ComponentExtractor;"],"names":["FileLoader","constructor","this","supportedTypes","html","css","js","images","setupDropZone","canvas","document","getElementById","forEach","eventName","addEventListener","preventDefaults","body","highlight","bind","unhighlight","handleDrop","e","preventDefault","stopPropagation","classList","add","remove","__async","files","dataTransfer","length","processFiles","fileArray","Array","from","file","processFile","fileType","getFileType","loadHTMLFile","loadCSSFile","loadJSFile","loadImageFile","showError","name","error","message","fileName","toLowerCase","type","patterns","Object","entries","some","pattern","startsWith","endsWith","content","readFileAsText","showHTMLPreview","htmlParser","HTMLParser","parseAndLoad","window","componentExtractor","extractComponents","saved","saveExtractedComponents","showSuccess","styleElement","createElement","textContent","setAttribute","head","appendChild","confirm","scriptElement","imageUrl","readFileAsDataURL","imgElement","src","alt","style","maxWidth","height","id","elementIdCounter","deleteBtn","className","onclick","deleteElement","selectElement","makeElementEditable","Promise","resolve","modal","createPreviewModal","loadBtn","querySelector","cancelBtn","innerHTML","escapeHtml","reject","reader","FileReader","onload","target","result","onerror","Error","readAsText","readAsDataURL","replace","showToast","console","log","alert","module","exports","HTMLParser$1","componentTypes","nav","header","footer","section","article","div","h1","h2","h3","h4","h5","h6","p","span","img","video","iframe","button","input","textarea","select","ul","ol","li","a","form","skipElements","htmlContent","doc","DOMParser","parseFromString","extractStyles","extractScripts","children","processElements","querySelectorAll","styleEl","index","newStyle","linkEl","newLink","rel","href","scriptElements","scripts","scriptEl","push","trim","script","newScript","elements","container","element","shouldSkipElement","convertedElement","convertElement","tagName","includes","nodeType","Node","ELEMENT_NODE","originalElement","componentType","newElement","attributes","attr","value","cssText","processElementContent","addEditorFunctionality","textNodes","childNodes","filter","node","TEXT_NODE","textNode","createTextNode","detectSpecialComponents","classes","convertToNavbar","convertToHero","convertToCard","convertToFooter","ProjectManager","storageKey","currentProjectKey","autoSaveInterval","autoSaveTimer","currentProject","init","loadCurrentProject","startAutoSave","setupEventListeners","createNewProject","projectName","Date","toLocaleDateString","generateId","created","toISOString","modified","version","thumbnail","saveCurrentProject","generateThumbnail","then","saveToStorage","localStorage","setItem","JSON","stringify","projects","getStoredProjects","existingIndex","findIndex","__spreadValues","unshift","splice","stored","getItem","parse","loadProjectToCanvas","loadProject","projectId","project","find","reapplyEditorEvents","replaceWith","cloneNode","deleteProject","filteredProjects","duplicateProject","duplicated","renameProject","newName","exportProject","blob","Blob","url","URL","createObjectURL","download","click","revokeObjectURL","importProject","stopAutoSave","setInterval","clearInterval","MutationObserver","observe","childList","subtree","characterData","html2canvas","width","scale","toDataURL","now","Math","random","toString","substr","getCurrentProjectInfo","getProjectStats","total","current","lastModified","ComponentExtractor","extractedComponents","componentPatterns","navbar","selectors","minElements","requiredElements","card","hero","gallery","testimonial","pricing","findComponentsByPattern","findComponentsByStructure","selector","validateComponent","component","createComponent","couldBeComponent","guessComponentType","childElements","Set","map","el","size","hasHeading","hasImage","hasButton","cleanElement","generateComponentId","generateComponentName","outerHTML","extractElementCSS","preview","generatePreview","tags","generateTags","walker","createTreeWalker","NodeFilter","SHOW_COMMENT","comments","nextNode","comment","removeAttribute","join","substring","heading","text","capitalizeFirst","split","timestamp","toLocaleTimeString","str","charAt","toUpperCase","slice","updated","getStoredComponents","deleteStoredComponent","componentId","filtered","c","searchComponents","query","components","searchTerm","tag"],"mappings":"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"}